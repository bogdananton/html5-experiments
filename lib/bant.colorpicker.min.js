var Bant=function(m){m.colorpicker=function(g){function p(a){h.style.background=a;setTimeout(function(){h.style.background="#777"},2E3)}function k(a){if("createEvent"in document){var b=document.createEvent("HTMLEvents");b.initEvent("change",!1,!0);a.dispatchEvent(b)}else a.fireEvent("onchange")}var d=document.querySelector(g),e=function(a){if(a.createShadowRoot)return a.createShadowRoot();if(a.webkitCreateShadowRoot)return a.webkitCreateShadowRoot()}(d);e.appendChild(function(){var a=document.createElement("div");
a.innerHTML='<input type="text" maxlength="7" id="color"><button title="pick color" id="picker"></button><div id="colorwheel"></div>';return a}());e.appendChild(function(){var a=document.createElement("style");a.textContent="#color, #picker, #colorwheel {border:none;float:left;outline:none} #color {width:60px;text-align:center;font-family:Arial;font-size:13px;line-height:13px;padding:0 5px} #picker {background:#777;border-radius:6px;margin:4px 5px 0 0;width:12px;height:12px;cursor:pointer } #colorwheel {position:absolute; margin:25px 0 0 0; cursor:pointer; display:none}";
return a}());g=m.colorwheel(e.querySelector("#colorwheel"),75);var n=g.getContext("2d"),h=e.querySelector("#picker"),f=e.querySelector("#color");f.value=d.value;f.addEventListener("change",function(){var a=f.value,b;var c=a;if(""==c)b=!1;else{var e=!1;b=0;c=c.substr(1);switch(c.length){case 3:b=1;break;case 6:b=2;break;default:b=0}if(0<b){var e=c.substr(0,b),h=c.substr(b,b),c=c.substr(2*b,b);b=RegExp("[0-9A-F]{"+b+"}","i");e=b.test(e)&&b.test(h)&&b.test(c)}b=e}b?(d.setAttribute("value",a),p(a),k(d)):
a=d.value;f.setAttribute("value",a)});g.addEventListener("mousemove",function(a){var b,c;a.offsetX?(b=a.offsetX,c=a.offsetY):a.layerX&&(b=a.layerX,c=a.layerY);a=n.getImageData(b,c,1,1).data;a="000000"+((a[0]<<16)+(a[1]<<8)+a[2]).toString(16);a="#"+a.substr(a.length-6);h.style.background=a;f.value=a});h.addEventListener("click",function(a){e.querySelector("#colorwheel").style.display="block"});g.addEventListener("click",function(a){e.querySelector("#colorwheel").style.display="none";k(f)});return d};
m.colorwheel=function(g,m){this.drawWheel=function(k){this.colorBase=[[255,0,255],[255,0,0],[255,255,0],[0,255,0],[0,255,255],[0,0,255],[255,0,255]];for(var d=this.radius,e=2*d,n=k.createImageData(1,1),h=n.data,f=0;f<e;f++)for(var a=0;a<e;a++){var b=Math.abs(Math.sqrt(Math.pow(f-d,2)+Math.pow(a-d,2)));if(!(b>d)){var b=2*(b+10)/d,c=0==f-d?a>d?90:-90:180*Math.atan2(a-d,f-d)/Math.PI,c=(c+30)%360,l=c/60;0>l&&(l=6+l);var c=parseInt(Math.round(l)),g=(6+c+(c>l?-1:1))%6,l=Math.max(l,c)-Math.min(l,c),b=this.makeColor(c,
g,l,b,!1);h[0]=b[0];h[1]=b[1];h[2]=b[2];h[3]=255;k.putImageData(n,f,a)}}};this.makeColor=function(k,d,e,g,h){for(var f=[],a=0;3>a;a++){var b=parseInt(Math.round(this.colorBase[k][a]*(1-e)+this.colorBase[d][a]*e));if(1>g)b*=g;else if(1<g)var c=g-1,b=255*c+b*(1-c);f.push(b)}return h?(k="000000"+((f[0]<<16)+(f[1]<<8)+f[2]).toString(16),"#"+k.substr(k.length-6)):f};this.initialize=function(g,d){this.elInstance="string"==typeof g?document.querySelector(g):g;this.radius=d;this.canvas=document.createElement("canvas");
this.elInstance.appendChild(this.canvas);var e=2*d;this.ctx=this.canvas.getContext("2d");this.canvas.setAttribute("width",e);this.canvas.setAttribute("height",e);this.drawWheel(this.ctx)};this.canvas=null;this.initialize(g,m);return this.canvas};return m}(Bant||{});